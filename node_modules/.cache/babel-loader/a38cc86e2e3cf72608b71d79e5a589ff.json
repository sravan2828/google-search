{"ast":null,"code":"var _jsxFileName = \"/Users/sravan/Desktop/giphy-search/src/containers/SearchResults/SearchResults.js\";\nimport React, { Component } from 'react';\nimport _ from 'lodash';\nimport ImageList from '../../components/ImageList';\nimport ImageBox from '../../components/ImageBox';\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport prepareImages from \"../../utils\";\n\nclass SearchResults extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      images: [],\n      offset: 0\n    };\n\n    this.fetchGifs = () => {\n      const text = this.props.text;\n      const offset = this.state.offset;\n      const apiUrl = \"https://api.giphy.com/v1/gifs/search?api_key=FIlE9DmKqXFR465FdZalQUwY6zLKi59r&q=\".concat(text, \"&limit=15&offset=\").concat(offset, \"&rating=G&lang=en\");\n      fetch(apiUrl).then(response => {\n        if (!response.ok) {\n          throw new Error('No ok response from API');\n        }\n\n        return response.json();\n      }).then(({\n        data\n      }) => {\n        if (offset === 0) {\n          this.setState({\n            images: data.map(prepareImages)\n          });\n        } else {\n          const images = this.state.images;\n          const prepareImagesData = data.map(prepareImages);\n          this.setState({\n            images: [...images, ...prepareImagesData]\n          });\n        }\n      }).catch(error => {\n        console.log(error);\n      });\n    };\n\n    this.fetchMoreData = () => {\n      this.setState({\n        offset: this.state.offset + 1\n      }, this.fetchGifs);\n    };\n  }\n\n  componentDidMount() {\n    this.fetchGifs();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.text !== prevProps.text) // Check if it's a new user, you can also use some unique property, like the ID  (this.props.user.id !== prevProps.user.id)\n      {\n        _.debounce(this.fetchGifs, 1200, {\n          leading: true\n        })();\n\n        this.setState({\n          offset: 0,\n          images: []\n        });\n      }\n  }\n\n  render() {\n    return React.createElement(InfiniteScroll, {\n      dataLength: this.state.images.length,\n      next: this.fetchMoreData,\n      hasMore: true,\n      loader: this.props.text ? React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, \"Loading...\") : React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, \"please enter text to search\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, React.createElement(ImageList, {\n      images: this.state.images,\n      renderImage: ImageBox,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default SearchResults;","map":{"version":3,"sources":["/Users/sravan/Desktop/giphy-search/src/containers/SearchResults/SearchResults.js"],"names":["React","Component","_","ImageList","ImageBox","InfiniteScroll","prepareImages","SearchResults","state","images","offset","fetchGifs","text","props","apiUrl","fetch","then","response","ok","Error","json","data","setState","map","prepareImagesData","catch","error","console","log","fetchMoreData","componentDidMount","componentDidUpdate","prevProps","debounce","leading","render","length"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport _ from 'lodash';\nimport ImageList from '../../components/ImageList';\nimport ImageBox from '../../components/ImageBox';\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport prepareImages from \"../../utils\";\nclass SearchResults extends Component {\n\n\tstate = {\n\t\timages: [],\n\t\toffset: 0\n\t};\n\n\tcomponentDidMount() {\n\t\tthis.fetchGifs();\n\t}\n\n\tcomponentDidUpdate(prevProps) {\n\t\tif(this.props.text !== prevProps.text) // Check if it's a new user, you can also use some unique property, like the ID  (this.props.user.id !== prevProps.user.id)\n\t\t{\n\t\t\t_.debounce(this.fetchGifs, 1200, {leading: true})();\n\t\t\tthis.setState({offset: 0, images: []});\n\t\t}\n\t} \n\n\tfetchGifs = () => {\n\t\tconst {text} = this.props;\n\t\tconst {offset} = this.state;\n\t\tconst apiUrl =\n\t\t\t`https://api.giphy.com/v1/gifs/search?api_key=FIlE9DmKqXFR465FdZalQUwY6zLKi59r&q=${text}&limit=15&offset=${offset}&rating=G&lang=en`;\n\t\tfetch(apiUrl)\n\t\t\t.then(response => {\n\t\t\t\tif (!response.ok) {\n\t\t\t\t\tthrow new Error('No ok response from API');\n\t\t\t\t}\n\t\t\t\treturn response.json();\n\t\t\t})\n\t\t\t.then(({ data }) => {\n\t\t\t\tif(offset === 0) {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\timages: data.map(prepareImages)\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tconst {images} = this.state;\n\t\t\t\t\tconst prepareImagesData = data.map(prepareImages);\n\t\t\t\t\tthis.setState({images: [...images, ...prepareImagesData]});\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tconsole.log(error);\n\t\t\t});\n\t}\n\t\n\n\tfetchMoreData = () => {\n\t\tthis.setState({offset: this.state.offset + 1}, this.fetchGifs);\n  };\n\n\trender() {\n\t\treturn <InfiniteScroll\n          dataLength={this.state.images.length}\n          next={this.fetchMoreData}\n          hasMore={true}\n          loader={this.props.text ? <h4>Loading...</h4>: <h4>please enter text to search</h4>}\n        >\n          <ImageList images={this.state.images} renderImage={ImageBox} />\n        </InfiniteScroll>\n\t\t ;\n\t}\n}\n\nexport default SearchResults;\n"]},"metadata":{},"sourceType":"module"}